window.filmes = [
    {
      id: 1,
      titulo: "Como se fosse a primeira vez",
      imagem: "assets/img/1.png",
      descricao: "Henry Roth é um veterinário paquerador que vive no Havaí e famoso pelo grande número de turistas que conquista. Seu novo alvo é Lucy Whitmore, que mora no local e por quem Henry se apaixona perdidamente. No entanto, Lucy sofre de falta de memória de curto prazo e se esquece rapidamente de fatos que acabaram de acontecer. Assim, Henry é obrigado a conquistá-la, dia após dia, para ficar ao seu lado."
    },
    {
      id: 2,
      titulo: "Nós",
      imagem: "assets/img/2.png",
      descricao: "Adelaide e Gabe levam a família para passar um fim de semana na praia e descansar. Eles começam a aproveitar o ensolarado local, mas a chegada de um grupo misterioso muda tudo e a família se torna refém de seres com aparências iguais às suas."
    },
    {
      id: 3,
      titulo: "Barbie: A Princesa da Ilha",
      imagem: "assets/img/3.png",
      descricao: "Depois de sobreviver a um naufrágio, a pequena princesa Rosella cresce em uma ilha deserta, onde é acolhida e criada por uma família de animais. Dez anos depois, o príncipe Antonio descobre a ilha e convida Rosella para acompanhá-lo até o seu reino."
    },
    {
      id: 4,
      titulo: "Barbie: A Fashion Fairytale",
      imagem: "assets/img/4.png",
      descricao: "Em um conto de fadas fashion, Barbie viaja a Paris para salvar o ateliê de moda da sua tia, que está prestes a ser fechado."
    },
    {
      id: 5,
      titulo: "Barbie em o Quebra-Nozes",
      imagem: "assets/img/5.png",
      descricao: "Clara ganha um lindo soldadinho de madeira de sua tia favorita. Na mesma noite, o soldado ganha vida para protege-la do Rato Rei, que invade sua sala. Ela acorda e ajuda o Quebra-Nozes, mas o Rato Rei a encolhe com uma terrível magia. Então, os dois se envolvem em uma espetacular aventura pera encontrar a Princesa Caramelo, a única que pode quebrar o diabólico feitiço."
    },
    {
      id: 6,
      titulo: "Barbie e o Portal Secreto",
      imagem: "assets/img/6.png",
      descricao: "A tímida princesa Alexa descobre um portal secreto e entra em uma terra desconhecida. Após conhecer Romy e Nori, uma sereia e uma fada, Alexa descobre seus poderes mágicos e as três decidem deter a malvada Malucia."
    },
    {
      id: 7,
      titulo: "Polly Pocket: PollyWorld",
      imagem: "assets/img/7.png",
      descricao: "Polly e suas amigas têm a chance de participar de seu reality show favorito, mas precisam enfrentar vários obstáculos, como a invejosa Beth e a malvada Lorelai, futura madrasta de Polly, que planeja mandá-la para um internato."
    },
    {
      id: 8,
      titulo: "Anyone But You",
      imagem: "assets/img/8.png",
      descricao: "Bea e Ben têm um primeiro encontro incrível, mas a atração inicial logo se torna ódio mútuo. Um casamento na Austrália força a aproximação dos dois, que decidem fingir um relacionamento para enganar a família e os amigos."
    },
    {
      id: 9,
      titulo: "Entre Montanhas",
      imagem: "assets/img/9.png",
      descricao: "Dois agentes defendem um secreto desfiladeiro. Quando, porém, as coisas saem do controle, eles acabam descendo do desfiladeiro e entrando em contato direto com o mal obscuro."
    },
    {
      id: 10,
      titulo: "Need for Speed",
      imagem: "assets/img/10.png",
      descricao: "Tobey Marshall, um exímio piloto, herda do pai uma oficina mecânica, onde trabalha com carros modificados. Um dia, um ex-piloto de Fórmula Indy o procura para concluir um Ford Mustang desenvolvido por um gênio da mecânica. Mesmo após a venda do carro, a rivalidade entre eles faz com que disputem uma última corrida, mas ela acaba com o falecimento de Pete, um amigo de Tobey. Considerado culpado pela morte, Tobey passa dois anos na prisão. Quando sai da cadeia, ele decide se vingar."
    },
    {
      id: 11,
      titulo: "Gran Turismo",
      imagem: "assets/img/11.png",
      descricao: "O jovem Jann Mardenborough vence uma série de competições do vídeo-game Gran Turismo, promovidas por uma grande empresa automobilística, e ganha a oportunidade de se tornar um piloto profissional."
    },
    {
      id: 12,
      titulo: "Rua do Medo",
      imagem: "assets/img/12.png",
      descricao: "Após uma série de assassinatos brutais, um grupo de adolescentes enfrenta uma força maligna que aterroriza uma cidade há séculos."
    },
    {
      id: 13,
      titulo: "Senna",
      imagem: "assets/img/13.png",
      descricao: "A minissérie Senna conta a história de Ayrton Senna, herói brasileiro dentro e fora das pistas da Fórmula 1. Ao longo de seis episódios, a produção mergulha na trajetória do piloto com um olhar intimista acerca de Ayrton, interpretado pelo ator Gabriel Leone, como piloto e como pessoa, contando com a colaboração ativa de sua família no desenvolvimento da série. A trama de Senna se desenrola a partir da largada da carreira do automobilista, partindo para a Europa pela primeira vez para correr na Fórmula Ford, e acompanha sua jornada, entre os desafios das pistas, os movimentos estratégicos nas trocas de escuderia, dos seus relacionamentos e do peso de ser uma figura pública tão significativa para sua terra-natal. A série também retrata o trágico acidente que tirou sua vida e deixou um país inteiro de luto, no Grande Prêmio de San Marino, na Itália."
    },
    {
      id: 14,
      titulo: "Tempestade: Planeta em Fúria",
      imagem: "assets/img/14.png",
      descricao: "A ocorrência cada vez mais frequente de eventos climáticos capazes de ameaçar a existência da humanidade faz com que seja criada uma extensa rede de satélites, ao redor de todo o planeta, de forma a controlar o próprio clima."
    },
    {
      id: 15,
      titulo: "Pânico",
      imagem: "assets/img/15.png",
      descricao: "Na pequena cidade de Woodsboro, um grupo de jovens do ensino médio enfrenta um assassino mascarado que testa seus conhecimentos sobre filmes de terror. Sidney Prescott, traumatizada após o brutal assassinato de sua mãe, é o alvo preferido do misterioso homicida que aterroriza a outrora pacata comunidade."
    },
    {
      id: 16,
      titulo: "Ford vs Ferrari",
      imagem: "assets/img/16.png",
      descricao: "O projetista Carroll Shelby e o piloto Ken Miles enfrentam a interferência empresarial, as leis da física e os próprios demônios para construir um carro de corrida para a Ford derrotar a hegemonia de Enzo Ferrari nas 24 horas de Le Mans."
    },
    {
      id: 17,
      titulo: "You",
      imagem: "assets/img/17.png",
      descricao: "A série You acompanha Joe Goldberg (Penn Badgley), um homem com problemas de obsessão que se transforma num stalker obsessivo, utilizando as redes sociais e a internet para se aproximar e controlar as mulheres que se tornam suas vítimas. A série explora a obsessão, a violência e a falta de privacidade na era digital."
    },
    {
      id: 18,
      titulo: "Como Treinar o seu Dragão 3",
      imagem: "assets/img/18.png",
      descricao: "Soluço busca realizar seu grande sonho de encontrar um lar pacífico onde os dragões possam viver em segurança. Lá, Banguela descobre uma companheira, assim como ele, mas um tanto selvagem. Mas é quando o perigo começa a rondar o lar, que a dupla Banguela e Soluço é testada e precisa tomar decisões difíceis para salvar suas espécies."
    }
];

function getFilmePorId(id) {
    return filmes.find(f => f.id === parseInt(id));
}

function renderizarDetalhes() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    if (id) {
        const filme = getFilmePorId(id);
        if (filme) {
            document.getElementById("titulo").textContent = filme.titulo;
            document.getElementById("imagem").src = filme.imagem;
            document.getElementById("descricao").textContent = filme.descricao;
        } else {
            document.body.innerHTML = "<h1 class='text-center my-5'>Filme não encontrado!</h1>";
        }
    }
}

function renderizarRecomendados() {
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    
    if (id) {
        const recomendados = filmes
            .filter(f => f.id !== parseInt(id))
            .sort(() => 0.5 - Math.random())
            .slice(0, 4);
        
        const container = document.getElementById("recomendados");
        if (container) {
            container.innerHTML = recomendados.map(filme => `
                <div class="col-6 col-md-4 col-lg-3">
                    <a href="detalhes.html?id=${filme.id}" class="d-block">
                        <img src="${filme.imagem}" alt="${filme.titulo}" class="img-fluid rounded hover-scale w-100">
                    </a>
                </div>
            `).join("");
        }
    }
}

function configurarLogo() {
    const logo = document.querySelector('.logo-img');
    if (logo) {
        logo.addEventListener('click', () => {
            window.location.href = 'index.html';
        });
    }
}

function configurarMobile() {
    document.querySelectorAll('.hover-scale').forEach(el => {
        el.style.tapHighlightColor = 'transparent';
        el.style.webkitTapHighlightColor = 'transparent';
    });
    
    document.querySelectorAll('input, select, textarea').forEach(el => {
        el.style.fontSize = '16px';
    });
}

window.onload = () => {
    configurarLogo();
    
    if ('ontouchstart' in window) {
        configurarMobile();
    }
    
    if (window.location.pathname.includes("detalhes.html")) {
        renderizarDetalhes();
        renderizarRecomendados();
    } else {
        const secao = document.querySelector("section.row");
        if (secao) {
            secao.innerHTML = "";
            filmes.forEach(filme => {
                const card = `
                    <div class="col-6 col-sm-4 col-md-3 col-lg-2">
                        <a href="detalhes.html?id=${filme.id}" class="d-block mb-2">
                            <img src="${filme.imagem}" alt="${filme.titulo}" 
                                 class="img-fluid rounded hover-scale w-100">
                        </a>
                    </div>
                `;
                secao.innerHTML += card;
            });
        }
    }
};

function getFavoritos() {
    const favoritos = localStorage.getItem('favoritos');
    return favoritos ? JSON.parse(favoritos) : [];
}

function toggleFavorito(filmeId) {
    const favoritos = getFavoritos();
    const index = favoritos.indexOf(filmeId);
    
    if (index === -1) {
        favoritos.push(filmeId);
    } else {
        favoritos.splice(index, 1);
    }
    
    localStorage.setItem('favoritos', JSON.stringify(favoritos));
    return index === -1; 
}

function isFavorito(filmeId) {
    const favoritos = getFavoritos();
    return favoritos.includes(filmeId);
}

function getFilmesFavoritos() {
    const favoritosIds = getFavoritos();
    return window.filmes.filter(filme => favoritosIds.includes(filme.id));
}

